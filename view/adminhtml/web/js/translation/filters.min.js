/**
 * Naxero.com
 * Professional ecommerce integrations for Magento
 *
 * PHP version 7
 *
 * @category  Magento2
 * @package   Naxero
 * @author    Platforms Development Team <contact@naxero.com>
 * @copyright Naxero.com
 * @license   https://opensource.org/licenses/mit-license.html MIT License
 * @link      https://www.naxero.com
 */

define(["jquery","Naxero_Translation/js/translation/core"],function(e,t){"use strict";return{build:function(e,t){e.filters&&t.filter_data&&(this.createOptions(e,e.filters.group,t.filter_data.file_group),this.createOptions(e,e.filters.type,t.filter_data.file_type),this.createOptions(e,e.filters.locale,t.filter_data.file_locale),this.createOptions(e,e.filters.status,t.filter_data.file_status))},addEvents:function(i){var l=this;if(i.cache._(".translation-paging-filter").off().on("change",function(){let l=e(this).find(":selected").val();t.setPaging(i,i.options.targetTable,l)}),i.filters){l=this;var a=[{selector:i.filters.group,field:"file_group"},{selector:i.filters.type,field:"file_type"},{selector:i.filters.locale,field:"file_locale"}];e.each(a,function(t,a){i.cache._(a.selector).off().on("change",function(){let t=e(this).find(":selected").val();l.update(i,{field:a.field,type:"=",value:t})})})}i.cache._("#filter_detail_errors").off().on("click",function(){if(i.cache._(this).is(":checked")){i.cache._(i.options.detailView).tabulator("setFilter",[{field:"is_error",type:"=",value:"1"}])}else i.cache._(i.options.detailView).tabulator("clearFilter")}),i.cache._("#filter_file_errors").off().on("click",function(){if(i.cache._(this).is(":checked")){i.cache._(i.options.targetTable).tabulator("setFilter",[{field:"errors",type:">",value:0}])}else i.cache._(i.options.targetTable).tabulator("clearFilter")}),i.cache._("#filter_string_errors").off().on("click",function(){if(i.cache._(this).is(":checked")){i.cache._(i.options.targetTable).tabulator("setFilter",[{field:"is_error",type:"=",value:"1"}])}else i.cache._(i.options.targetTable).tabulator("clearFilter")})},createOptions:function(t,i,l){var a=[];e.each(l,function(e,t){var i='<option value="'+t+'">'+t+"</option>";a.push(i)}),t.cache._(i).children("option:not(:first)").remove(),t.cache._(i).append(a.join(""))},update:function(t,i){var l=e(t.options.targetTable).tabulator("getFilters"),a=l.find(function(e){return e.field==i.field});if(0==l.length||void 0===a)l.push(i);else for(var r=0;r<l.length;r++)l[r].field==i.field?"alltx"===i.value?l.splice(r,1):"alltx"!==i.value&&i.field===l[r].field&&(l[r]=i):l[r].field==i.field&&"alltx"!==i.value&&l.push(i);t.cache._(t.options.targetTable).tabulator("clearFilter"),t.cache._(t.options.targetTable).tabulator("setFilter",l)}}});