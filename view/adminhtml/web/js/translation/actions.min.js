/**
 * Naxero.com
 * Professional ecommerce integrations for Magento
 *
 * PHP version 7
 *
 * @category  Magento2
 * @package   Naxero
 * @author    Platforms Development Team <contact@naxero.com>
 * @copyright Naxero.com
 * @license   https://opensource.org/licenses/mit-license.html MIT License
 * @link      https://www.naxero.com
 */

define(["jquery","Naxero_Translation/js/translation/core","Naxero_Translation/js/translation/prompt","mage/translate"],function(o,t,e,n){"use strict";return{initNewFileButton:function(o){o.cache._("#new-file").off().on("click",function(){e.newFile(o)})},initImportDataButton:function(o){o.cache._("#import-data").off().on("click",function(){e.importData(o)})},initNewRowButton:function(o){o.cache._("#add-row").off().on("click",function(){o.cache._(".no-results").remove();var e=o.cache._(o.options.detailView).tabulator("getRows").length,a={file_id:o.detailViewId.toString(),index:e+1,is_readable:1,is_writable:1,row_id:e,key:n("key..."),value:n("value...")};o.cache._(o.options.detailView).tabulator("addRow",a,!0),o.cache._(o.options.detailView).tabulator("setSort","row_id","desc"),t.updateEntityData(o,{fileId:o.detailViewId.toString(),rowContent:a}),o.rowsCountEdited=!0})},initBackButton:function(o){o.cache._("#button-back").off().on("click",function(){t.togglePanes(o,0),o.cache._(o.options.detailView).tabulator("destroy"),o.rowsCountEdited&&(t.getData(o),o.rowsCountEdited=!1)})},initDownloadButton:function(o){o.cache._("#download-file").off().on("click",function(){o.cache._(o.options.detailView).tabulator("download","csv",t.getDownloadFileName())})},initScanButton:function(o){o.cache._("#update-files").off().on("click",function(){e.newScan(o)})},initCacheButton:function(e){e.cache._('button[id^="flush-cache"]').off().on("click",function(){var n={action:"flush_cache",form_key:window.FORM_KEY};o.ajax({type:"POST",url:e.options.cacheUrl,showLoader:!0,data:n,success:function(o){var n=o.success?"success":"error";t.showMessage(e,n,o.message)},error:function(o,n,a){t.showMessage(e,"error",a)}})})},initLogsButton:function(e){e.cache._("#clear-logs").off().on("click",function(){var n={form_key:window.FORM_KEY};o.ajax({type:"POST",url:e.options.clearLogsUrl,showLoader:!0,data:n,success:function(o){var n=o.success?"success":"error";t.showMessage(e,n,o.message),t.getData(e)},error:function(o,n,a){t.showMessage(e,"error",a)}})})}}});